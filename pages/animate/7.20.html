<html lang="ru" class="">
<style>

</style>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/style_7.css">
  <link rel="stylesheet" href="css/style_1.css">
  <script>
    document.documentElement.classList.remove('no-js');
  </script>
  <script src="js/js_1.js" data-sentry="ff96f5d0a0ad4071ac8e8c7b3302d90d" data-project="13"></script>
  <link rel="stylesheet" href="css/style_2.css">
  <link rel="stylesheet" href="css/style_3.css">
  <link rel="stylesheet" href="css/style_4.css">
  <link rel="stylesheet" href="css/style_5.css">
  <link rel="stylesheet" href="css/style_8.css"><link rel="shortcut icon" type="image/x-icon" href="https://up.htmlacademy.ru/meta/animation-favicon.ico">

  <meta name="theme-color" content="#2e368e">
  <meta name="application-name" content="Анимация для фронтендеров #1">
  <meta name="apple-mobile-web-app-title" content="Анимация для фронтендеров #1">
  <link rel="preload" href="css/2DF5B4_F_0.woff2" type="font/woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="css/2DF5B4_D_0.woff2" type="font/woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="css/2DF5B4_2_0.woff2" type="font/woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="css/ubuntu-mono.woff2" type="font/woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="css/style_6.css">
  <style>
    .side-menu--php .side-menu__item {
      color: #fff;
    }
  </style>
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;
      j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-W3ZS73J');
  </script>
  <style type="text/css">
    .hljs {
      display: block;
      color: black;
    }

    .hljs-built_in,
    .hljs-keyword,
    .hljs-builtin-name,
    .hljs-selector-id {
      color: blue;
    }

    .hljs-subst,
    .hljs-attr {
      color: black;
    }

    .hljs-title,
    .hljs-type {
      color: #0000A2;
    }

    .hljs-literal {
      color: rgb(88, 92, 246);
    }

    .hljs-number {
      color: rgb(0, 0, 205);
    }

    .hljs-regexp,
    .hljs-string,
    .hljs-doctag,
    .hljs-selector-pseudo {
      color: rgb(3, 106, 7);
    }

    .hljs-selector-class,
    .hljs-variable {
      color: rgb(49, 132, 149);
    }

    .hljs-selector-tag {
      color: rgb(197, 6, 11);
    }

    .hljs-attribute {
      color: rgb(109, 121, 222);
    }

    .hljs-comment,
    .hljs-quote {
      color: rgb(76, 136, 107);
    }

    .hljs-meta {
      color: rgb(104, 104, 91);
    }

    .hljs-tag {
      color: rgb(0, 22, 142);
    }
  </style>
</head>

<body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W3ZS73J" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <div class="page-content page-content--relative page-content--php page-content--up">
    <div class="blog-section blog-section--page blog-section--black-white">
      <div class="blog-section__wrap">
        <div class="side-menu__wrap">
          <div class="side-menu side-menu--main side-menu--php side-menu--up">
            <div class="side-menu__title"><a class="side-menu__link side-menu__link--main link"
                href="index.html">Учебник</a><button class="side-menu__button" type="button"><span
                  class="sr-only">Развернуть /
                  Свернуть</span><svg aria-hidden="true" width="8" height="16">
                  <use xlink:href="img/sprites/up.svg?cs=fb70597153879c70ce140224310b7444b664990a#icon-arrow-right">
                  </use>
                </svg></button></div>
            <ul class="side-menu__list"><li class="side-menu__item"><button class="side-menu__toggle"
                          type="button"><span class="sr-only">Развернуть /
                              Свернуть</span></button>0.&nbsp;Проект + задания
                          <ul class="side-menu__inner-list">
                              <li class="side-menu__inner-item ">
                                    <a href="0.1.html">0.1.&nbsp;Критерии</a>
                              </li>
                              <li class="side-menu__inner-item"><a href="0.2.html">0.2.&nbsp;ТЗ + файлы проекта</a></li>
                              <li class="side-menu__inner-item"><a href="0.3.html">0.3.&nbsp;Задания к главам учебника</a></li>
                
                          </ul>
                    </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>1.&nbsp;Основы
                анимации
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item ">
                    <a href="1.1.html">1.1.&nbsp;Вступление</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="1.2.html">1.2.&nbsp;История
                      анимации</a></li>
                  <li class="side-menu__inner-item"><a href="1.3.html">1.3.&nbsp;Физиология
                      восприятия анимации.
                      Понятие FPS.</a></li>
                  <li class="side-menu__inner-item"><a href="1.4.html">1.4.&nbsp;Кривая
                      Безье в CSS</a></li>
                  <li class="side-menu__inner-item"><a href="1.5.html">1.5.&nbsp;Линейные
                      и Покадровые анимации</a></li>
                  <li class="side-menu__inner-item"><a href="1.6.html">1.6.&nbsp;CSS
                      Transition</a></li>
                  <li class="side-menu__inner-item"><a href="1.7.html">1.7.&nbsp;С
                      чего
                      начать делать анимацию</a></li>
                </ul>
              </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>2.&nbsp;Анимация
                в CSS
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item"><a href="2.1.html">2.1.&nbsp;Директива
                      @keyframes и группа
                      свойств
                      Animation CSS</a></li>
                  <li class="side-menu__inner-item"><a href="2.2.html">2.2.&nbsp;Отслеживания
                      изменений в CSS.
                      Процесс
                      перерисовки страницы.</a></li>
                  <li class="side-menu__inner-item"><a href="2.3.html">2.3.&nbsp;Инструменты
                      для отладки анимации
                      и
                      производительности анимации</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="2.4.html">2.4.&nbsp;Производительность.
                      CSS анимация
                      на
                      GPU</a></li>
                  <li class="side-menu__inner-item"><a href="2.5.html">2.5.&nbsp;Побуквеная
                      анимация текста</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="2.6.html">2.6.&nbsp;Медиазапросы
                      prefers-reduced-motion и
                      update</a></li>
                </ul>
              </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>3.&nbsp;SVG
                Анимация
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item"><a href="3.1.html">3.1.&nbsp;Вступление</a>
                  </li>
                  <li class="side-menu__inner-item
     ">
                    <span>3.2.&nbsp;Тег
                    &lt;animate&gt;</span>
                    <ul class="side-menu__inner-list side-menu__inner-list--second" style="display:block">
                      <li class="side-menu__inner-item  ">
                        <a href="3.2.1.html">3.2.1.&nbsp;Передача
                          параметров
                          и
                          время
                          проигрывания</a>
                      </li>
                      <li class="side-menu__inner-item ">
                        <a href="3.2.2.html">3.2.2.&nbsp;Интерактивность
                          анимаций</a>
                      </li>
                      <li class="side-menu__inner-item ">
                        <a href="3.2.3.html">3.2.3.&nbsp;Функции
                          времени</a>
                      </li>
                      <li class="side-menu__inner-item ">
                        <a href="3.2.4.html">3.2.4.&nbsp;Морфинг
                          контура</a>
                      </li>
                    </ul>
                  </li>
                  <li class="side-menu__inner-item"><a href="3.3.html">3.3.&nbsp;Тег
                      &lt;set&gt;</a></li>
                  <li class="side-menu__inner-item"><a href="3.4.html">3.4.&nbsp;Тег
                      &lt;animateTransform&gt;</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="3.5.html">3.5.&nbsp;Тег
                      &lt;animateMotion&gt;</a></li>
                  <li class="side-menu__inner-item"><a href="3.6.html">3.6.&nbsp;Методика
                      реализации SMIL анимации</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="3.7.html">3.7.&nbsp;Отрисовка
                      объектов внутри
                      SVG</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="3.8.html">3.8.&nbsp;Инструкция
                      по работе с
                      программой
                      Adobe After Effects</a></li>
                  <li class="side-menu__inner-item"><a href="3.9.html">3.9.&nbsp;Ритм
                      анимации</a></li>
                  <li class="side-menu__inner-item"><a href="3.10.html">3.10.&nbsp;Методы
                      описания кривых траекторий</a>
                  </li>
                </ul>
              </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>4.&nbsp;Покадровая
                анимация. JavaScript и Canvas
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item"><a href="4.1.html">4.1.&nbsp;Покадровая
                      анимация</a></li>
                  <li class="side-menu__inner-item"><a href="4.2.html">4.2.&nbsp;Временные
                      функции</a></li>
                  <li class="side-menu__inner-item"><a href="4.3.html">4.3.&nbsp;Рисование
                      в canvas</a></li>
                  <li class="side-menu__inner-item"><a href="4.4.html">4.4.&nbsp;Анимация
                      в canvas</a></li>
                  <li class="side-menu__inner-item"><a href="4.5.html">4.5.&nbsp;Методика
                      реализации canvas анимации</a>
                  </li>
                </ul>
              </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>5.&nbsp;WebGL.
                Шейдеры</a>
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item"><a href="5.1.html">5.1.&nbsp;Использование
                      GPU для отрисовки
                      сложной графики</a></li>
                  <li class="side-menu__inner-item"><a href="5.2.html">5.2.&nbsp;Использование
                      WebGL</a></li>
                  <li class="side-menu__inner-item"><a href="5.3.html">5.3.&nbsp;Библиотеки
                      WebGL</a></li>
                  <li class="side-menu__inner-item"><a href="5.4.html">5.4.&nbsp;План
                      изучения WebGL</a></li>
                  <li class="side-menu__inner-item"><a href="5.5.html">5.5.&nbsp;3D-объекты
                      в WebGL</a></li>
                  <li class="side-menu__inner-item"><a href="5.6.html">5.6.&nbsp;WebGL
                      pipeline. Вершинный и
                      фрагментный шейдеры</a></li>
                  <li class="side-menu__inner-item"><a href="5.7.html">5.7.&nbsp;Подготовка
                      и запуск программы
                      WebGL в
                      JS</a></li>
                  <li class="side-menu__inner-item"><a href="5.8.html">5.8.&nbsp;Синтаксис
                      GLSL</a></li>
                  <li class="side-menu__inner-item"><a href="5.9.html">5.9.&nbsp;Типы
                      данных в WebGL</a></li>
                  <li class="side-menu__inner-item"><a href="5.10.html">5.10.&nbsp;Функции
                      в WebGL</a></li>
                  <li class="side-menu__inner-item"><a href="5.11.html">5.11.&nbsp;Функция
                      шейдера main()</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="5.12.html">5.12.&nbsp;Приём
                      данных в GLSL из JS</a></li>
                  <li class="side-menu__inner-item"><a href="5.13.html">5.13.&nbsp;Передача
                      данных из вершинного
                      шейдера в фрагментный шейдер</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="5.14.html">5.14.&nbsp;Отладка
                      программы WebGL</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="5.15.html">5.15.&nbsp;Three.JS.
                      Вступление</a></li>
                  <li class="side-menu__inner-item"><a href="5.16.html">5.16.&nbsp;Инфраструктура
                      Three.JS для
                      рендеринга 3D изображений</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="5.17.html">5.17.&nbsp;Геометрия
                      и материал
                      визуального
                      объекта в Three.JS</a></li>
                  <li class="side-menu__inner-item"><a href="5.18.html">5.18.&nbsp;Материалы
                      ShaderMaterial и
                      RawShaderMaterial</a></li>
                  <li class="side-menu__inner-item"><a href="5.19.html">5.19.&nbsp;Цвет
                      как вектор</a></li>
                  <li class="side-menu__inner-item"><a href="5.20.html">5.20.&nbsp;Цветовые
                      фильтры и матрица
                      преобразования</a></li>
                  <li class="side-menu__inner-item"><a href="5.21.html">5.21.&nbsp;Blending.
                      Наложение двух
                      изображений</a></li>
                  <li class="side-menu__inner-item"><a href="5.22.html">5.22.&nbsp;Работа
                      с alpha-каналом и маскирование
                      изображений</a></li>
                  <li class="side-menu__inner-item"><a href="5.23.html">5.23.&nbsp;Шум</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="5.24.html">5.24.&nbsp;Displacement
                      по карте
                      смещений</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="5.25.html">5.25.&nbsp;Покадровая
                      анимация параметров
                      кастомного материала в JS</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="5.26.html">5.26.&nbsp;Расчётная
                      анимация в шейдерах
                      и
                      параметр времени</a></li>
                </ul>
              </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>6.&nbsp;Three.js
                часть 1: 3D в браузере
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item"><a href="6.1.html">6.1.&nbsp;Работа
                      с
                      3D в Three.js. Введение</a></li>
                  <li class="side-menu__inner-item"><a href="6.2.html">6.2.&nbsp;3D-объект
                      в Three.js</a></li>
                  <li class="side-menu__inner-item"><a href="6.3.html">6.3.&nbsp;Схема
                      3D-приложения Three.js с одним
                      объектом</a></li>
                  <li class="side-menu__inner-item"><a href="6.4.html">6.4.&nbsp;Схема
                      3D-приложения Three.js и процесс
                      рендеринга Scene</a></li>
                  <li class="side-menu__inner-item"><a href="6.5.html">6.5.&nbsp;Источники
                      света</a></li>
                  <li class="side-menu__inner-item"><a href="6.6.html">6.6.&nbsp;Родительский
                      класс объектов
                      Object3D</a></li>
                  <li class="side-menu__inner-item"><a href="6.7.html">6.7.&nbsp;Основные
                      объекты Mesh, Points, Line,
                      LineLoop, LineSegments</a></li>
                  <li class="side-menu__inner-item"><a href="6.8.html">6.8.&nbsp;Группирование
                      объектов в
                      Group</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="6.9.html">6.9.&nbsp;Описание
                      геометрии в BufferGeometry и
                      DirectGeometry</a></li>
                  <li class="side-menu__inner-item"><a href="6.10.html">6.10.&nbsp;Параметрические
                      геометрии
                      Three.js</a></li>
                  <li class="side-menu__inner-item"><a href="6.11.html">6.11.&nbsp;Shape
                      и 3D-геометрии на их базе:
                      ShapeGeometry,
                      ExtrudeGeometry</a></li>
                  <li class="side-menu__inner-item"><a href="6.12.html">6.12.&nbsp;Фигуры
                      вращение с помощью
                      LatheGeometry</a></li>
                  <li class="side-menu__inner-item"><a href="6.13.html">6.13.&nbsp;Подготовка
                      геометрии для
                      Points,
                      Line, LineLoop, LineSegments</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="6.14.html">6.14.&nbsp;Материалы
                      объектов Mesh</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="6.15.html">6.15.&nbsp;Тени
                      в
                      Three.js</a></li>
                  <li class="side-menu__inner-item"><a href="6.16.html">6.16.&nbsp;Прозрачность
                      и Blending</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="6.17.html">6.17.&nbsp;Материал
                      MeshMatcapMaterial</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="6.18.html">6.18.&nbsp;Материал
                      PointsMaterial</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="6.19.html">6.19.&nbsp;Загрузка
                      3D-моделей</a></li>
                  <li class="side-menu__inner-item"><a href="6.20.html">6.20.&nbsp;Загрузка
                      3D-объектов в формате
                      gLTF</a></li>
                  <li class="side-menu__inner-item"><a href="6.21.html">6.21.&nbsp;Анимация
                      3D-объектов.
                      Введение</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="6.22.html">6.22.&nbsp;Анимация
                      Object3D</a></li>
                  <li class="side-menu__inner-item"><a href="6.23.html">6.23.&nbsp;Изоляция
                      движения с помощью
                      Group</a></li>
                  <li class="side-menu__inner-item"><a href="6.24.html">6.24.&nbsp;Способы
                      анимации формы
                      объекта</a>
                  </li>
                </ul>
              </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>7.&nbsp;Three.js
                часть 2. Работа с камерой и
                финализация
                работы с 3D
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item"><a href="7.1.html">7.1.&nbsp;Ещё
                      раз
                      об изоляции движения</a></li>
                  <li class="side-menu__inner-item"><a href="7.2.html">7.2.&nbsp;Понятие
                      Rig</a></li>
                  <li class="side-menu__inner-item"><a href="7.3.html">7.3.&nbsp;Методика
                      структурного Rigging</a></li>
                  <li class="side-menu__inner-item"><a href="7.4.html">7.4.&nbsp;Класс
                      Camera в Three.js</a></li>
                  <li class="side-menu__inner-item"><a href="7.5.html">7.5.&nbsp;Типы
                      Camera и их настройка</a></li>
                  <li class="side-menu__inner-item"><a href="7.6.html">7.6.&nbsp;Переключение
                      между камерами</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="7.7.html">7.7.&nbsp;Виды
                      склеек кадров</a></li>
                  <li class="side-menu__inner-item"><a href="7.8.html">7.8.&nbsp;Правила
                      и приёмы монтажа</a></li>
                  <li class="side-menu__inner-item"><a href="7.9.html">7.9.&nbsp;Множественный
                      рендеринг и
                      мультиэкраны</a></li>
                  <li class="side-menu__inner-item"><a href="7.10.html">7.10.&nbsp;Внутрикадровый
                      монтаж</a></li>
                  <li class="side-menu__inner-item"><a href="7.11.html">7.11.&nbsp;Конструкции
                      Camera Rig:
                      1-node,
                      2-nodes и 1-node с "нулём"</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="7.12.html">7.12.&nbsp;Конструкции
                      Camera Rig: Долли
                      и
                      кран</a></li>
                  <li class="side-menu__inner-item"><a href="7.13.html">7.13.&nbsp;Конструкция
                      Camera Rig
                      свободного
                      облёта</a></li>
                  <li class="side-menu__inner-item"><a href="7.14.html">7.14.&nbsp;Разработка
                      конструкции Camera
                      Rig
                      под задачу</a></li>
                  <li class="side-menu__inner-item"><a href="7.15.html">7.15.&nbsp;Дополнительные
                      действия с
                      объектами
                      при перемещении камеры</a></li>
                  <li class="side-menu__inner-item"><a href="7.16.html">7.16.&nbsp;Реакция
                      камеры на действия
                      пользователя</a></li>
                  <li class="side-menu__inner-item"><a href="7.17.html">7.17.&nbsp;Resize-кадрирование
                      3D-сцены
                      при
                      изменении размеров экрана</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="7.18.html">7.18.&nbsp;Способы
                      оптимизации 3D-сцены
                      под
                      мобильные устройства</a></li>
                  <li class="side-menu__inner-item"><a href="7.19.html">7.19.&nbsp;Предварительная
                      загрузка
                      материалов</a></li>
                  <li class="side-menu__inner-item"><a href="7.20.html">7.20.&nbsp;Использование
                      EffectComposer</a>
                  </li>
                </ul>
              </li>
              <li class="side-menu__item"><button class="side-menu__toggle" type="button"><span
                    class="sr-only">Развернуть /
                    Свернуть</span></button>8.&nbsp;Будущее
                анимации в браузере
                <ul class="side-menu__inner-list">
                  <li class="side-menu__inner-item"><a href="8.1.html">8.1.&nbsp;Web
                      Animation API</a></li>
                  <li class="side-menu__inner-item"><a href="8.2.html">8.2.&nbsp;CSS
                      Houdini</a></li>
                  <li class="side-menu__inner-item"><a href="8.3.html">8.3.&nbsp;Библиотеки
                      и инструменты для
                      упрощения работы с анимациями,
                      таймлайнами, SVG, canvas,
                      WebGL.</a></li>
                  <li class="side-menu__inner-item"><a href="8.4.html">8.4.&nbsp;GSAP</a>
                  </li>
                  <li class="side-menu__inner-item"><a href="8.5.html">8.5.&nbsp;Графические
                      редакторы анимации
                      для
                      использования в web</a></li>
                  <li class="side-menu__inner-item"><a href="8.6.html">8.6.&nbsp;Платформы
                      Unity3d и Unreal
                      Engine</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>

        <div class="blog-section__content">
          <div class="blog-section__wrap-inner">
            <div class="post-info post-info--up">
              <p class="post-info__head"><span class="post-info__type">Базовая
                  теория</span></p>
              <h2 class="post-info__title">Глава 7.20.&nbsp;Использование
                EffectComposer</h2>
            </div>
            <div class="post-content">
              <p>Готовые 3D-сцены можно использовать на&nbsp;сцене «как есть»
                или можно поверх наделить
                дополнительные эффекты:</p>
              <ol>
                <li>Растровые эффекты на&nbsp;одном изображении.</li>
                <li>Накладывать 2 и&nbsp;более изображений 3D-сцен друг
                  на&nbsp;друга&nbsp;—
                  <strong>Composing</strong>.</li>
              </ol>
              <p>Для этих целей применяют <strong>EffectComposer</strong>.</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">import</span> { EffectComposer } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/postprocessing/EffectComposer.js'</span>;

<span class="hljs-keyword">const</span> composer = <span class="hljs-keyword">new</span> EffectComposer(renderer);
</code></pre>
              <p>В&nbsp;EffectComposer добавляются инструкции для этапов
                рендеринга&nbsp;— Pass’ы. Pass’ы
                выполняются по&nbsp;очереди в&nbsp;том порядке,
                в&nbsp;котором они были добавлены
                в&nbsp;EffectComposer.</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> somePass = <span class="hljs-keyword">new</span> SomeFabulousPass();
composer.addPass(somePass);
</code></pre>
              <p>Вставить Pass внутрь очереди можно методом <code>composer.insertPass(somePass,
index);</code>.</p>
              <p>Все Pass должны иметь методы <code>render(renderer, writeBuffer, readBuffer, deltaTime,
maskActive)</code> и&nbsp;<code>setSize(width, height)</code>.</p>
              <p>В&nbsp;<code>requestAnimationFrame</code> вместо вызова
                метода <code>renderer.render</code>,
                нужно вызывать метод <code>render</code> объекта
                EffectComposer.</p>
              <p>При ресайзе помимо <code>renderer.setSize</code> нужно
                вызывать
                <code>composer.setSize</code>. По&nbsp;умолчанию
                EffectComposer берёт значение
                pixelRatio из&nbsp;переданного при создании renderer.
                Поменять его можно методом
                <code>setPixelRatio</code>.</p>
              <pre><code class="javascript language-javascript hljs">composer.render();
</code></pre>
              <p>Чтобы в&nbsp;перечень шагов рендеринга добавить этап
                отрисовки 3D-сцены нужно добавить
                <strong>RenderPass</strong> и&nbsp;там указать ссылки
                на&nbsp;Scene и&nbsp;Camera:</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> renderPass = <span class="hljs-keyword">new</span> RenderPass(scene, camera);
composer.addPass(renderPass);
</code></pre>
              <hr>
              <p>EffectComposer и&nbsp;другие классы для Composing
                и&nbsp;эффектов, которые мы&nbsp;рассмотрим
                ниже, не&nbsp;входят в&nbsp;основной комплект классов
                Three.js. Они находятся
                в&nbsp;папке
                <code>three/examples/jsm/postprocessing</code>
                в&nbsp;npm-пакете Three.js
                в&nbsp;виде модулей ES6.</p>
              <p><em>До&nbsp;версии 117&nbsp;мая 2020 года они были также
                  доступны в&nbsp;формате, который
                  добавлял классы к&nbsp;глобальной переменной
                  THREE: в&nbsp;папке
                  <code>three/examples/js/postprocessing</code>
                  или по&nbsp;прямым ссылкам
                  из&nbsp;«<a
                    href="https://threejs.org/examples/js/postprocessing">https://threejs.org/examples/js/postprocessing</a>...».
                  В&nbsp;мае поддержка скриптов
                  из&nbsp;<code>examples/js</code> была
                  прекращена.</em></p>
              <hr>
              <p>Рассмотрим примеры.</p>
              <h2>1. Применение растрового эффекта на&nbsp;отрендеренной сцене
              </h2>
              <p>После того как на&nbsp;этапе RenderPass сцена была
                отрендерена, в&nbsp;следующий Pass
                её&nbsp;изображение попадает в&nbsp;составе readBuffer:
                <code>readBuffer.texture</code>.
                И&nbsp;к&nbsp;этому изображение мы&nbsp;можем применить
                растровый эффект, как
                мы&nbsp;это делали с&nbsp;текстурой на&nbsp;плоскости
                в&nbsp;<strong>модуле 5</strong>.
              </p>
              <p>Для этих целей имеется готовый класс
                <strong>ShaderPass</strong>:</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> shaderPass = <span class="hljs-keyword">new</span> ShaderPass(material, <span class="hljs-string">'tParameterName'</span>);	<span class="hljs-comment">// textureID = 'tParameterName'</span>
composer.addPass(shaderPass);
</code></pre>
              <p>material&nbsp;— ссылка на&nbsp;материал эффекта.
                textureID&nbsp;— название uniform-переменной для
                текстуры, по&nbsp;умолчанию
                <code>'tDiffuse'</code>.</p>
              <p>В&nbsp;<code>three/examples/jsm/shaders</code> имеются
                некоторые готовые эффекты. Например,
                <code>three/examples/jsm/shaders/DotScreenShader.js</code>&nbsp;—
                эффект
                полиграфического растра.</p>
              <p><img src="images/dot-effect.png" alt="DotScreenShader"></p>
              <p>И&nbsp;поверх нового изображение можно применять другие
                эффекты аналогичным образом.</p>
              <h2>2. Рендеринг набора сцен с&nbsp;растровыми эффектами после
                объединения сцен</h2>
              <p>В&nbsp;последовательность Pass’ов можно передать RenderPass
                более одной пары scene + camera.
              </p>
              <p>По&nbsp;умолчанию каждый последующий RenderPass очищает
                canvas. Чтобы все сцены отображались,
                нужно</p>
              <ol>
                <li>
                  <p>Отменить очистку экрана:
                    <code>renderPass.clear = false;</code>.
                  </p>
                </li>
                <li>
                  <p>Применить любой растровый шейдерный эффект
                  </p>
                  <p>Если эффект не&nbsp;нужен, а&nbsp;только
                    объединение RenderPass, нужно
                    использовать ShaderPass
                    с&nbsp;CopyShader
                    (<code>three/examples/jsm/shaders/CopyShader.js</code>).
                    Без этого будет
                    рендериться только последний RenderPass.
                    Это особенность работы
                    EffectComposer.</p>
                  <p>Также не&nbsp;получится применить эффект
                    только к&nbsp;одному RenderPass,
                    просто добавив ShaderPass между
                    Pass’ами. В&nbsp;этом случае будет
                    отображаться только сцены, отрендеренные
                    перед ShaderPass.</p>
                </li>
              </ol>
              <p><img src="images/two-cams.png" alt="DotScreenShader"></p>
              <p><strong>Виды с&nbsp;двух камер объединены и&nbsp;поверх
                  наложен эффект</strong></p>
              <h2>3. Рендеринг набора сцен с&nbsp;отдельными растровыми
                эффектами для разных сцен</h2>
              <p>Для того, чтобы комбинировать две сцены с&nbsp;разными
                эффектами и&nbsp;потом объединять
                их&nbsp;в&nbsp;одно изображение, нужно использовать два
                EffectComposer и&nbsp;более.</p>
              <p><img src="images/two-cams-separate.png" alt="DotScreenShader"></p>
              <p><strong>Виды с&nbsp;двух камер. Эффект применен только
                  к&nbsp;одному виду</strong></p>
              <ol>
                <li>Чтобы применить к&nbsp;отдельной сцене эффекты:</li>
              </ol>
              <p>Один EffectComposer нужно настроить так, чтобы
                он&nbsp;не&nbsp;рендерился на&nbsp;основной
                canvas, а&nbsp;записывался в&nbsp;отдельный буфер
                в&nbsp;отдельном <a
                  href="https://threejs.org/docs/#api/en/renderers/WebGLRenderTarget">WebGLRenderTarget</a>.
              </p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> renderTargetParameters = { 
  <span class="hljs-attr">minFilter</span>: THREE.LinearFilter, 
  <span class="hljs-attr">magFilter</span>: THREE.LinearFilter, 
  <span class="hljs-attr">format</span>: THREE.RGBFormat, 
  <span class="hljs-attr">stencilBufer</span>: <span class="hljs-literal">false</span> 
};

<span class="hljs-keyword">const</span> renderTarget1 = <span class="hljs-keyword">new</span> THREE.WebGLRenderTarget(initialWidth, initialHeight, renderTargetParameters);

<span class="hljs-keyword">const</span> composer1 = <span class="hljs-keyword">new</span> THREE.EffectComposer(renderer, renderTarget1);
composer1.renderToScreen = <span class="hljs-literal">false</span>;
</code></pre>
              <p>После этого нужно добавить его Pass’ы: RenderPass
                и&nbsp;эффекты.</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> renderPass1 = <span class="hljs-keyword">new</span> RenderPass(scene, camera);
composer1.addPass(renderPass1);

<span class="hljs-keyword">const</span> dotEffectPass = <span class="hljs-keyword">new</span> THREE.ShaderPass(THREE.DotScreenShader);
composer1.addPass(dotEffectPass);
</code></pre>
              <p>После этого нужно обязательно добавить copyPass, чтобы
                сделать composing картинки перед
                передачей далее.</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> copyPass = <span class="hljs-keyword">new</span> THREE.ShaderPass(THREE.CopyShader);
composer1.addPass(copyPass);
</code></pre>
              <ol start="2">
                <li>Далее нужно соединить полученное изображение
                  с&nbsp;изображениями других сцен.</li>
              </ol>
              <p>Для примера ко&nbsp;второй сцене отдельный эффект применять
                не&nbsp;будем.</p>
              <p>Второй EffectComposer&nbsp;— финальный&nbsp;— будем рендерить
                в&nbsp;основной canvas. Поэтому
                создаём его с&nbsp;обычными настройками.</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> composer2 = <span class="hljs-keyword">new</span> EffectComposer(renderer);
</code></pre>
              <p>Второй EffectComposer должен рендерить помимо Pass’ов второй
                сцены ShaderPass, который должен
                наложить одну картинку на&nbsp;другую. ShaderPass может
                выполнить любой вид Blending
                из&nbsp;главы <strong>5.21 Blending. Наложение двух
                  изображений</strong>.</p>
              <p>Поэтому сначала мы&nbsp;добавляем Pass’ы сцены:</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> renderPass2 = <span class="hljs-keyword">new</span> RenderPass(scene, camera);
composer2.addPass(renderPass);

<span class="hljs-keyword">const</span> someEffectPass = <span class="hljs-keyword">new</span> THREE.ShaderPass(SomeEffectShader);
composer2.addPass(someEffectPass);
</code></pre>
              <p>А&nbsp;затем ShaderPass с&nbsp;кастомных материалом:</p>
              <pre><code class="javascript language-javascript hljs"><span class="hljs-keyword">const</span> blendingPass = <span class="hljs-keyword">new</span> THREE.ShaderPass(blendingShaderMaterial, <span class="hljs-string">'tDiffuse2'</span>);
composer2.addPass(blendingPass);
</code></pre>
              <p>В&nbsp;качестве uniform-параметра для текстуры ротой сцены
                указываем
                <code>'tDiffuse2'</code>. А&nbsp;текстуру первой сцены
                задаём «вручную»
                в&nbsp;uniform-параметр <code>'tDiffuse1'</code>.</p>
              <pre><code class="javascript language-javascript hljs">blendingShaderMaterial.uniforms[<span class="hljs-string">'tDiffuse1'</span>].value = composer1.renderTarget2;	<span class="hljs-comment">// или composer1.renderTarget1, в разных источниках утверждают, что один из renderTarget должен работать в этом случае.</span>
</code></pre>
              <p>При этом в&nbsp;фрагментном шейдере мы&nbsp;реализуем
                Blending texel1 и&nbsp;texel2 для
                tDiffuse1 и&nbsp;tDiffuse2 по&nbsp;одной из&nbsp;формул
                или произвольной собственной.
              </p>
              <p>Там&nbsp;же можно предусмотреть uniform-параметры для вида
                склейки Dissolve, например,
                <code>'uOpacity1'</code>, и&nbsp;добавить его
                в&nbsp;формулу Blending.</p>
              <p>И&nbsp;поверх изображение после Blending также можно
                применять другие эффекты.</p>
              <div class="post-content__wrapper">
                <div class="card card--rating card--rating-embedded" data-rating="" data-rating-comment="">
                  <h3 class="card__header">Поделитесь, как вам
                    глава?</h3>
                  <div class="card__content">
                    <form class="card-rating " action="/animation/1/book/7.20/mark" method="POST">
                      <div class="card-rating__values">
                        <input class="sr-only" type="radio" name="value" id="book-rating-5" value="5"><label
                          for="book-rating-5"><span class="sr-only">Глава
                            —&nbsp;огонь!</span><svg aria-hidden="true" width="16" height="16">
                            <use xlink:href="img/sprites/up.svg?cs=fb70597153879c70ce140224310b7444b664990a#star">
                            </use>
                          </svg></label><input class="sr-only" type="radio" name="value" id="book-rating-4"
                          value="4"><label for="book-rating-4"><span class="sr-only">Это
                            было
                            полезно</span><svg aria-hidden="true" width="16" height="16">
                            <use xlink:href="img/sprites/up.svg?cs=fb70597153879c70ce140224310b7444b664990a#star">
                            </use>
                          </svg></label><input class="sr-only" type="radio" name="value" id="book-rating-3"
                          value="3"><label for="book-rating-3"><span class="sr-only">Неплохо,
                            но можно
                            лучше</span><svg aria-hidden="true" width="16" height="16">
                            <use xlink:href="img/sprites/up.svg?cs=fb70597153879c70ce140224310b7444b664990a#star">
                            </use>
                          </svg></label><input class="sr-only" type="radio" name="value" id="book-rating-2"
                          value="2"><label for="book-rating-2"><span class="sr-only">Ничего
                            полезного
                            не
                            было</span><svg aria-hidden="true" width="16" height="16">
                            <use xlink:href="img/sprites/up.svg?cs=fb70597153879c70ce140224310b7444b664990a#star">
                            </use>
                          </svg></label><input class="sr-only" type="radio" name="value" id="book-rating-1"
                          value="1"><label for="book-rating-1"><span class="sr-only">Я
                            напишу
                            эту
                            главу
                            лучше</span><svg aria-hidden="true" width="16" height="16">
                            <use xlink:href="img/sprites/up.svg?cs=fb70597153879c70ce140224310b7444b664990a#star">
                            </use>
                          </svg></label>
                      </div>
                      <p class="card-rating__title ">
                        Оцените главу</p>
                      <div class="card-rating__evaluate hidden ">
                        <span class="card-rating__text"></span>
                      </div>
                      <div class="card-rating__comment hidden">
                        <label class="sr-only" for="book-rating-comment">Комментарий</label>
                        <div class="form__group">
                          <textarea class="field field--area field--full-width" rows="2" cols="40"
                            placeholder="Оставьте ваш комментарий." name="comment" id="book-rating-comment"></textarea>
                          <p class="form__notice form__notice--red hidden">
                            Пожалуйста,
                            оставьте
                            комментарий.
                          </p>
                        </div><button class="button button--small" type="submit">Отправить</button>
                      </div>
                    </form>
                    <p class="alert alert--green alert--full-width text-right hidden" data-rating-finish=""
                      style="margin-top:10px;">
                      Спасибо!</p>
                  </div>
                </div><a class="button button--green" href="animation/1/book/7.20/complete">Продолжить</a>
              </div>

            </div>
          </div>
        </div>


      </div>
    </div>
  </div>
  <style id="intercom-lightweight-app-style" type="text/css">
    @keyframes intercom-lightweight-app-launcher {
      from {
        opacity: 0;
        transform: scale(0.5);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes intercom-lightweight-app-gradient {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes intercom-lightweight-app-messenger {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .intercom-lightweight-app {
      position: fixed;
      z-index: 2147483001;
      width: 0;
      height: 0;
      font-family: intercom-font, "Helvetica Neue", "Apple Color Emoji", Helvetica, Arial, sans-serif;

    }

    .intercom-lightweight-app-gradient {
      position: fixed;
      z-index: 2147483002;
      width: 500px;
      height: 500px;
      bottom: 0;
      right: 0;
      pointer-events: none;
      background: radial-gradient(ellipse at bottom right,
          rgba(29, 39, 54, 0.16) 0%,
          rgba(29, 39, 54, 0) 72%);
      animation: intercom-lightweight-app-gradient 200ms ease-out;
    }


    .intercom-lightweight-app-launcher {
      position: fixed;
      z-index: 2147483003;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #2D2D44;
      cursor: pointer;
      box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.06), 0 2px 32px 0 rgba(0, 0, 0, 0.16);
      animation: intercom-lightweight-app-launcher 250ms ease;
    }

    .intercom-lightweight-app-launcher:focus {
      outline: none;

    }


    .intercom-lightweight-app-launcher-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: 0;
      left: 0;
      width: 60px;
      height: 60px;
      transition: transform 100ms linear, opacity 80ms linear;
    }

    .intercom-lightweight-app-launcher-icon-open {

      opacity: 1;
      transform: rotate(0deg) scale(1);

    }

    .intercom-lightweight-app-launcher-icon-open svg {
      width: 28px;
      height: 32px;
    }

    .intercom-lightweight-app-launcher-icon-open svg path {
      fill: rgb(255, 255, 255);
    }

    .intercom-lightweight-app-launcher-icon-self-serve {

      opacity: 1;
      transform: rotate(0deg) scale(1);

    }

    .intercom-lightweight-app-launcher-icon-self-serve svg {
      height: 56px;
    }

    .intercom-lightweight-app-launcher-icon-self-serve svg path {
      fill: rgb(255, 255, 255);
    }

    .intercom-lightweight-app-launcher-custom-icon-open {
      max-height: 36px;
      max-width: 36px;

      opacity: 1;
      transform: rotate(0deg) scale(1);

    }

    .intercom-lightweight-app-launcher-icon-minimize {

      opacity: 0;
      transform: rotate(-60deg) scale(0);

    }

    .intercom-lightweight-app-launcher-icon-minimize svg {
      width: 16px;
    }

    .intercom-lightweight-app-launcher-icon-minimize svg path {
      fill: rgb(255, 255, 255);
    }

    .intercom-lightweight-app-messenger {
      position: fixed;
      z-index: 2147483003;
      overflow: hidden;
      background-color: white;
      animation: intercom-lightweight-app-messenger 250ms ease-out;

      width: 376px;
      height: calc(100% - 40px);
      max-height: 704px;
      min-height: 250px;
      right: 20px;
      bottom: 20px;
      box-shadow: 0 5px 40px rgba(0, 0, 0, 0.16);
      border-radius: 8px;

    }

    .intercom-lightweight-app-messenger-header {
      height: 75px;
      background: linear-gradient(135deg,
          rgb(45, 45, 68) 0%,
          rgb(4, 4, 7) 100%);
    }

    @media print {
      .intercom-lightweight-app {
        display: none;
      }
    }
  </style>
  </div>
  <div id="naptha_container0932014_0707"></div>
</body>

</html>