<!DOCTYPE html>
<html class='h-100' lang='ru' prefix='og: https://ogp.me/ns#'>

<head>
  <title>Ссылки - PHP: Основы</title>
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token"
    content="U283nvYNPRM4sgETvHkM198nIDkID_8XlXwUxWwt2FikF2RhazigsVB9fbvDaP0zfh0CpKv_S43mTqXduDjWPw" />
  <meta name="csp-nonce" />
  <link rel="shortcut icon" type="image/x-icon"
    href="https://cdn2.hexlet.io/assets/favicon-8fa102c058afb01de5016a155d7db433283dc7e08ddc3c4d1aef527c1b8502b6.ico" />
  <meta content='width=device-width, initial-scale=1.0' name='viewport'>
  <meta charset='utf-8'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
</head>

<body class='h-100'>
  <div class='d-flex flex-column flex-md-row h-100'>
    <div class='x-border-md-right flex-fill tab-content overflow-hidden h-100'>
      <div aria-labelledby='lesson-tab' class='tab-pane fade show active overflow-auto h-100' id='lesson'
        role='tabpanel'>
        <div class='container-xl my-3 mb-md-4 mb-lg-5'>
          <div class='row justify-content-center'>
            <div class='col-12 col-lg-10'>
              <div class='mt-3 paywall'>
                <div class='p-2 p-md-4 shadow-sm bg-white'>
                  <div class='hexlet-markdown-body overflow-hidden p-2 p-md-4'>
                    <h1 class='mt-0 mb-4'>Ссылки</h1>
                    <p><em>Тема данного урока немного своеобразная. Механизм, который здесь обсуждается, напрямую
                        используется редко, но в дальнейшем, когда мы начнем использовать массивы и объекты, он
                        понадобится на уровне базового понимания. Не относитесь к этому материалу слишком серьезно,
                        главное уловить концепцию и знать само понятие, все остальное по необходимости</em></p>

                    <p>Ссылки в PHP — это средство доступа к содержимому одной переменной под разными именами.</p>

                    <p>Без ссылок:</p>
                    <pre class="hljs"><code class=php><span style="color: #999999;font-weight: bold">&lt;?php</span>

<span style="color: #008080">$a</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #009999">5</span><span style="background-color: #f8f8f8">;</span>
<span style="color: #008080">$b</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #008080">$a</span><span style="background-color: #f8f8f8">;</span>
<span style="color: #008080">$a</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #009999">3</span><span style="background-color: #f8f8f8">;</span>
<span style="color: #000000;font-weight: bold">echo</span> <span style="color: #008080">$b</span><span style="background-color: #f8f8f8">;</span> <span style="color: #999988;font-style: italic">// =&gt; 5</span>
</code></pre>
                    <p>Используя ссылки:</p>
                    <pre class="hljs"><code class=php><span style="color: #999999;font-weight: bold">&lt;?php</span>

<span style="color: #008080">$a</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #009999">5</span><span style="background-color: #f8f8f8">;</span>
<span style="color: #008080">$b</span> <span style="color: #000000;font-weight: bold">=&amp;</span> <span style="color: #008080">$a</span><span style="background-color: #f8f8f8">;</span>
<span style="color: #008080">$a</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #009999">3</span><span style="background-color: #f8f8f8">;</span>
<span style="color: #000000;font-weight: bold">echo</span> <span style="color: #008080">$b</span><span style="background-color: #f8f8f8">;</span> <span style="color: #999988;font-style: italic">// =&gt; 3</span>
</code></pre>
                    <p>Запись <code>=&amp;</code> говорит о том, что переменная слева начинает указывать на те же
                      данные, что и переменная в правой части выражения.</p>

                    <p>Здесь стоит сказать, что, если вы запомнили переменные как коробочки, которые содержат внутри
                      себя данные, то это неверная аналогия. На самом деле, данные хранятся отдельно, а переменные -
                      отдельно. Поэтому, правильно говорить, что переменные <strong>ссылаются</strong> на свои данные.
                      Рассмотрим первую ситуацию подробнее:</p>
                    <pre class="hljs"><code class=php><span style="color: #999999;font-weight: bold">&lt;?php</span>

<span style="color: #008080">$a</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #009999">5</span><span style="background-color: #f8f8f8">;</span>
<span style="color: #008080">$b</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #008080">$a</span><span style="background-color: #f8f8f8">;</span>
</code></pre>
                    <p>В этом коде, переменная <code>$a</code> связывается с числом <code>5</code>. Затем мы выполняем
                      присвоение <code>$b = $a</code>. Несмотря на то, что справа стоит <code>$a</code>, правильно этот
                      код воспринимать так <code>$b = 5</code>. То есть, вместо <code>$a</code> подставляется ее
                      значение, которое становится значением <code>$b</code>. Эти переменные не имеют между собой ничего
                      общего, они не ссылаются на одни и те же данные. Это может показаться странным, ведь и там, и там
                      записано одно и то же. Но это не так - у каждой переменной своя собственная пятерка.</p>

                    <p>Но все меняется если во время присвоения добавить амперсанд: <code>$b =&amp; $a</code>. Теперь
                      <code>$b</code> и <code>$a</code> ссылаются на одно и то же значение. Если поменять его в
                      <code>$b</code>, то оно поменяется и для <code>$a</code>. Обратное тоже верно. <code>$a</code> и
                      <code>$b</code> здесь абсолютно эквивалентны, но это не означает, что <code>$a</code> указывает на
                      <code>$b</code>, или наоборот. Это означает, что <code>$a</code> и <code>$b</code> указывают на
                      одно и то же значение.</p>

                    <p>Вероятно, сейчас вы чувствуете легкое замешательство. Если это так - не переживайте, это
                      нормально. Тема ссылок — не та вещь, которую можно понять и прочувствовать, прочитав один урок.
                    </p>

                    <p><em>Есть три основных операции с использованием ссылок: присвоение по ссылке, передача по ссылке
                        и возврат по ссылке.</em></p>

                    <p>Примеры которые демонстрировались выше - скорее искусственные. Практически единственное место,
                      где ссылки встречаются в реальной жизни - аргументы функций, причем встроенные в сам язык. В
                      основном это касается массивов, с которыми мы познакомимся позже, а пока посмотрим на этот прием
                      без них.</p>
                    <pre class="hljs"><code class=php><span style="color: #999999;font-weight: bold">&lt;?php</span>

<span style="color: #999988;font-style: italic">// либо так: function strangeFunction(&amp;$text)</span>
<span style="color: #000000;font-weight: bold">function</span> <span style="background-color: #f8f8f8">strangeFunction</span><span style="background-color: #f8f8f8">(</span><span style="color: #445588;font-weight: bold">string</span> <span style="color: #000000;font-weight: bold">&amp;</span><span style="color: #008080">$text</span><span style="background-color: #f8f8f8">)</span>
<span style="background-color: #f8f8f8">{</span>
    <span style="color: #008080">$text</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #d14">'hei'</span><span style="background-color: #f8f8f8">;</span>
<span style="background-color: #f8f8f8">}</span>

<span style="color: #008080">$text</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #d14">'money'</span><span style="background-color: #f8f8f8">;</span>

<span style="color: #990000;font-weight: bold">strangeFunction</span><span style="background-color: #f8f8f8">(</span><span style="color: #008080">$text</span><span style="background-color: #f8f8f8">);</span>
<span style="color: #000000;font-weight: bold">echo</span> <span style="color: #008080">$text</span><span style="background-color: #f8f8f8">;</span> <span style="color: #999988;font-style: italic">// =&gt; hei</span>
</code></pre>
                    <p>В этом примере, сама функция декларирует, что ее аргумент передается по ссылке. Самое неприятное
                      то, что вы об этом даже не узнаете, если внимательно не прочитаете документацию. Обычно такие
                      функции ничего не возвращают, они меняют аргументы, что, кстати, считается плохой практикой.
                      Подобное поведение имеет смысл только в некоторых ситуациях, где крайне важна производительность,
                      например, при сортировке массивов.</p>

                    <p><em>Особняком стоят объекты, которые всегда передаются по ссылке - об этом рассказывается в
                        следующих курсах</em>.</p>

                    <hr class='my-5'>
                    <h4 class='mb-4'>Дополнительные материалы</h4>
                    <ol>
                      <li class='lead'>
                        <a target="_blank" href="https://php.net/manual/ru/language.references.php">Официальная
                          документация</a>
                      </li>
                      <li class='lead'>
                        <a target="_blank" href="https://php.net/manual/ru/function.fscanf.php">Пример функции
                          работающей со ссылками: fscan</a>
                      </li>
                    </ol>
</body>

</html>